"""
火山引擎豆包 Endpoint ID 获取详细教程
===========================================

步骤 1: 登录火山引擎控制台
-------------------------------------------
1. 打开浏览器，访问: https://console.volcengine.com/
2. 使用您的账号登录

步骤 2: 进入火山方舟服务
-------------------------------------------
方法A - 通过产品列表:
1. 在控制台首页，找到左侧菜单或产品列表
2. 搜索或找到 "火山方舟" (Volcengine Ark)
3. 点击进入

方法B - 直接访问:
直接访问: https://console.volcengine.com/ark

步骤 3: 进入推理服务页面
-------------------------------------------
1. 在火山方舟控制台左侧菜单中，找到 "推理" 或 "在线推理"
2. 点击进入推理服务管理页面
3. 或者直接访问: https://console.volcengine.com/ark/region:ark+cn-beijing/endpoint

步骤 4: 查看或创建推理接入点
-------------------------------------------

情况A - 如果您已经有推理接入点:
1. 在 "推理接入点列表" 页面，您会看到已创建的接入点
2. 每个接入点都有以下信息:
   - 接入点名称
   - 接入点 ID (格式: ep-xxxxxxxxx-xxxxx)  ← 这就是您需要的！
   - 模型名称 (如: Doubao-pro-32k)
   - 状态 (运行中/已停止)
   - 创建时间

3. 找到状态为 "运行中" 的接入点
4. 复制其 "接入点 ID"

情况B - 如果您还没有推理接入点:
1. 点击页面右上角的 "创建推理接入点" 按钮
2. 填写配置信息:
   ┌─────────────────────────────────────┐
   │ 接入点名称: my-doubao-endpoint      │
   │ 模型选择: Doubao-pro-32k           │
   │ 版本: 选择最新版本                  │
   │ 地域: cn-beijing (中国北京)        │
   └─────────────────────────────────────┘
3. 点击 "确认" 或 "创建"
4. 等待接入点创建完成（约1-2分钟）
5. 创建成功后，在列表中找到刚创建的接入点
6. 复制其 "接入点 ID"

步骤 5: 更新 .env 配置文件
-------------------------------------------
1. 打开项目中的 backend/.env 文件
2. 找到这一行:
   DOUBAO_ENDPOINT_ID=doubao-seed-1-8-251228

3. 替换为您复制的接入点 ID:
   DOUBAO_ENDPOINT_ID=ep-20250119xxx-xxxxx

   示例:
   DOUBAO_ENDPOINT_ID=ep-20250119123456-abcde

步骤 6: 验证配置
-------------------------------------------
在终端运行测试命令:

cd e:\项目\ai-debate\backend
python test_doubao_stream.py

如果看到类似以下输出，说明配置成功:
==================================================
测试豆包流式响应
==================================================
📋 配置检查:
API Key: c0e03f57-af9f-4343-8...
Endpoint ID: ep-20250119xxx-xxxxx  ← 这里应该显示 ep- 开头
🤖 Provider 名称: Doubao
📤 发送测试消息...
==================================================
我是Doubao，字节跳动开发的智能助手...
==================================================
✅ 测试成功!

常见问题排查
===========================================

问题1: 找不到 "火山方舟" 入口
- 确认您的账号已开通火山方舟服务
- 可能需要先申请开通: https://www.volcengine.com/products/ark

问题2: 推理接入点列表为空
- 您需要先创建一个推理接入点
- 按照上面 "情况B" 的步骤操作

问题3: Endpoint ID 格式不对
- 正确格式: ep-xxxxxxxxx-xxxxx (必须以 ep- 开头)
- 错误格式: doubao-pro-32k (这是模型名称，不是 endpoint ID)

问题4: 显示 "推理接入点已停止"
- 在接入点列表中，点击 "启动" 按钮
- 等待状态变为 "运行中"

问题5: 调用失败，提示余额不足
- 检查火山引擎账户余额
- 前往充值: https://console.volcengine.com/finance/recharge

重要提示
===========================================
1. Endpoint ID 和 API Key 是两个不同的东西:
   - API Key: 用于身份验证 (格式: UUID)
   - Endpoint ID: 指定使用哪个推理接入点 (格式: ep-xxx-xxx)

2. 每个推理接入点都关联一个特定模型
   - 不同的 endpoint 可能对应不同版本的 Doubao

3. 确保推理接入点状态为 "运行中"
   - 停止状态的 endpoint 无法使用

4. 火山引擎会根据实际调用量计费
   - 建议先小额充值测试

需要更多帮助？
===========================================
- 火山引擎官方文档: https://www.volcengine.com/docs/82379
- 火山方舟文档: https://www.volcengine.com/docs/82379/1099455
- 技术支持: 在控制台右上角可以找到工单/在线客服入口
"""
print(__doc__)
